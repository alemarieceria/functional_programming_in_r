{
  "hash": "cc95951e44d840ec957812ca458be8c1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Labs for UO's EDLD 653: Functional Programming for Educational Data Science Course\"\nsubtitle: \"[GitHub Repository](https://fp-2022.netlify.app/)\"\nformat: html\nexecute: \n  warning: false\n---\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n::: panel-tabset\n\n## 1\n\n### Data Structures\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Set Up - `m`\"}\nset.seed(123) # Set random number generation\n\nm <- lm(mpg ~ hp + cyl + drat, mtcars)\nstr(m)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nList of 12\n $ coefficients : Named num [1:4] 22.5141 -0.0288 -1.3606 2.8409\n  ..- attr(*, \"names\")= chr [1:4] \"(Intercept)\" \"hp\" \"cyl\" \"drat\"\n $ residuals    : Named num [1:32] -1.26 -1.26 -2.53 1.47 3.16 ...\n  ..- attr(*, \"names\")= chr [1:32] \"Mazda RX4\" \"Mazda RX4 Wag\" \"Datsun 710\" \"Hornet 4 Drive\" ...\n $ effects      : Named num [1:32] -113.65 -26.05 -12.48 5.68 2.84 ...\n  ..- attr(*, \"names\")= chr [1:32] \"(Intercept)\" \"hp\" \"cyl\" \"drat\" ...\n $ rank         : int 4\n $ fitted.values: Named num [1:32] 22.3 22.3 25.3 19.9 15.5 ...\n  ..- attr(*, \"names\")= chr [1:32] \"Mazda RX4\" \"Mazda RX4 Wag\" \"Datsun 710\" \"Hornet 4 Drive\" ...\n $ assign       : int [1:4] 0 1 2 3\n $ qr           :List of 5\n  ..$ qr   : num [1:32, 1:4] -5.657 0.177 0.177 0.177 0.177 ...\n  .. ..- attr(*, \"dimnames\")=List of 2\n  .. .. ..$ : chr [1:32] \"Mazda RX4\" \"Mazda RX4 Wag\" \"Datsun 710\" \"Hornet 4 Drive\" ...\n  .. .. ..$ : chr [1:4] \"(Intercept)\" \"hp\" \"cyl\" \"drat\"\n  .. ..- attr(*, \"assign\")= int [1:4] 0 1 2 3\n  ..$ qraux: num [1:4] 1.18 1.08 1.21 1.28\n  ..$ pivot: int [1:4] 1 2 3 4\n  ..$ tol  : num 1e-07\n  ..$ rank : int 4\n  ..- attr(*, \"class\")= chr \"qr\"\n $ df.residual  : int 28\n $ xlevels      : Named list()\n $ call         : language lm(formula = mpg ~ hp + cyl + drat, data = mtcars)\n $ terms        :Classes 'terms', 'formula'  language mpg ~ hp + cyl + drat\n  .. ..- attr(*, \"variables\")= language list(mpg, hp, cyl, drat)\n  .. ..- attr(*, \"factors\")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...\n  .. .. ..- attr(*, \"dimnames\")=List of 2\n  .. .. .. ..$ : chr [1:4] \"mpg\" \"hp\" \"cyl\" \"drat\"\n  .. .. .. ..$ : chr [1:3] \"hp\" \"cyl\" \"drat\"\n  .. ..- attr(*, \"term.labels\")= chr [1:3] \"hp\" \"cyl\" \"drat\"\n  .. ..- attr(*, \"order\")= int [1:3] 1 1 1\n  .. ..- attr(*, \"intercept\")= int 1\n  .. ..- attr(*, \"response\")= int 1\n  .. ..- attr(*, \".Environment\")=<environment: R_GlobalEnv> \n  .. ..- attr(*, \"predvars\")= language list(mpg, hp, cyl, drat)\n  .. ..- attr(*, \"dataClasses\")= Named chr [1:4] \"numeric\" \"numeric\" \"numeric\" \"numeric\"\n  .. .. ..- attr(*, \"names\")= chr [1:4] \"mpg\" \"hp\" \"cyl\" \"drat\"\n $ model        :'data.frame':\t32 obs. of  4 variables:\n  ..$ mpg : num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...\n  ..$ hp  : num [1:32] 110 110 93 110 175 105 245 62 95 123 ...\n  ..$ cyl : num [1:32] 6 6 4 6 8 6 8 4 4 6 ...\n  ..$ drat: num [1:32] 3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...\n  ..- attr(*, \"terms\")=Classes 'terms', 'formula'  language mpg ~ hp + cyl + drat\n  .. .. ..- attr(*, \"variables\")= language list(mpg, hp, cyl, drat)\n  .. .. ..- attr(*, \"factors\")= int [1:4, 1:3] 0 1 0 0 0 0 1 0 0 0 ...\n  .. .. .. ..- attr(*, \"dimnames\")=List of 2\n  .. .. .. .. ..$ : chr [1:4] \"mpg\" \"hp\" \"cyl\" \"drat\"\n  .. .. .. .. ..$ : chr [1:3] \"hp\" \"cyl\" \"drat\"\n  .. .. ..- attr(*, \"term.labels\")= chr [1:3] \"hp\" \"cyl\" \"drat\"\n  .. .. ..- attr(*, \"order\")= int [1:3] 1 1 1\n  .. .. ..- attr(*, \"intercept\")= int 1\n  .. .. ..- attr(*, \"response\")= int 1\n  .. .. ..- attr(*, \".Environment\")=<environment: R_GlobalEnv> \n  .. .. ..- attr(*, \"predvars\")= language list(mpg, hp, cyl, drat)\n  .. .. ..- attr(*, \"dataClasses\")= Named chr [1:4] \"numeric\" \"numeric\" \"numeric\" \"numeric\"\n  .. .. .. ..- attr(*, \"names\")= chr [1:4] \"mpg\" \"hp\" \"cyl\" \"drat\"\n - attr(*, \"class\")= chr \"lm\"\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Set Up - `l`\"}\nl <- list(a = list(m = matrix(1:12, ncol = 3),\n              \t   v = 1:7),\n          b = data.frame(student = 1:15,\n                         score = rnorm(15, 100, 10)))\nstr(l)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nList of 2\n $ a:List of 2\n  ..$ m: int [1:4, 1:3] 1 2 3 4 5 6 7 8 9 10 ...\n  ..$ v: int [1:7] 1 2 3 4 5 6 7\n $ b:'data.frame':\t15 obs. of  2 variables:\n  ..$ student: int [1:15] 1 2 3 4 5 6 7 8 9 10 ...\n  ..$ score  : num [1:15] 94.4 97.7 115.6 100.7 101.3 ...\n```\n\n\n:::\n:::\n\n\n\n\n#### From `m`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Extract the qr tolerance (`tol`)\"}\ntol <- m$qr$tol\ntol\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1e-07\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Extract the term labels from the model\"}\nterms <- attr(m$terms, \"term.labels\")\nterms\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"hp\"   \"cyl\"  \"drat\"\n```\n\n\n:::\n:::\n\n\n\n\n#### From `l`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Use at least two different methods to extract `m`\"}\nm1 <- l$a$m\nm1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     [,1] [,2] [,3]\n[1,]    1    5    9\n[2,]    2    6   10\n[3,]    3    7   11\n[4,]    4    8   12\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Use at least two different methods to extract `m`\"}\nm2 <- l[[\"a\"]][\"m\"]\nm2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$m\n     [,1] [,2] [,3]\n[1,]    1    5    9\n[2,]    2    6   10\n[3,]    3    7   11\n[4,]    4    8   12\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Extract the third column of `m`. Maintain the dimensions (matrix structure)\"}\nm1_third_col <- matrix(m1[, 3])\nm1_third_col\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     [,1]\n[1,]    9\n[2,]   10\n[3,]   11\n[4,]   12\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Extract the score for student 7 in the data frame\"}\nstudent_7_score <- l$b$score[7]\nstudent_7_score\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 104.6092\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Extract the score for student 7 in the data frame (Alternative version)\"}\nl$b[7, ]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  student    score\n7       7 104.6092\n```\n\n\n:::\n:::\n\n\n\n\n***\n\n### Loops\n\n`insurance_coverage.csv` file is corrupt, will use the penguins dataset instead\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"`penguins` dataset variable names\"}\nnames(penguins)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"species\"           \"island\"            \"bill_length_mm\"   \n[4] \"bill_depth_mm\"     \"flipper_length_mm\" \"body_mass_g\"      \n[7] \"sex\"               \"year\"             \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Split the data file by `species` and `sex`\"}\nby_species_sex <- split(penguins, list(penguins$species, penguins$sex))\nby_species_sex\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$Adelie.female\n# A tibble: 73 × 8\n   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n   <fct>   <fct>              <dbl>         <dbl>             <int>       <int>\n 1 Adelie  Torgersen           39.5          17.4               186        3800\n 2 Adelie  Torgersen           40.3          18                 195        3250\n 3 Adelie  Torgersen           36.7          19.3               193        3450\n 4 Adelie  Torgersen           38.9          17.8               181        3625\n 5 Adelie  Torgersen           41.1          17.6               182        3200\n 6 Adelie  Torgersen           36.6          17.8               185        3700\n 7 Adelie  Torgersen           38.7          19                 195        3450\n 8 Adelie  Torgersen           34.4          18.4               184        3325\n 9 Adelie  Biscoe              37.8          18.3               174        3400\n10 Adelie  Biscoe              35.9          19.2               189        3800\n# ℹ 63 more rows\n# ℹ 2 more variables: sex <fct>, year <int>\n\n$Chinstrap.female\n# A tibble: 34 × 8\n   species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n   <fct>     <fct>           <dbl>         <dbl>             <int>       <int>\n 1 Chinstrap Dream            46.5          17.9               192        3500\n 2 Chinstrap Dream            45.4          18.7               188        3525\n 3 Chinstrap Dream            45.2          17.8               198        3950\n 4 Chinstrap Dream            46.1          18.2               178        3250\n 5 Chinstrap Dream            46            18.9               195        4150\n 6 Chinstrap Dream            46.6          17.8               193        3800\n 7 Chinstrap Dream            47            17.3               185        3700\n 8 Chinstrap Dream            45.9          17.1               190        3575\n 9 Chinstrap Dream            58            17.8               181        3700\n10 Chinstrap Dream            46.4          18.6               190        3450\n# ℹ 24 more rows\n# ℹ 2 more variables: sex <fct>, year <int>\n\n$Gentoo.female\n# A tibble: 58 × 8\n   species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n   <fct>   <fct>           <dbl>         <dbl>             <int>       <int>\n 1 Gentoo  Biscoe           46.1          13.2               211        4500\n 2 Gentoo  Biscoe           48.7          14.1               210        4450\n 3 Gentoo  Biscoe           46.5          13.5               210        4550\n 4 Gentoo  Biscoe           45.4          14.6               211        4800\n 5 Gentoo  Biscoe           43.3          13.4               209        4400\n 6 Gentoo  Biscoe           40.9          13.7               214        4650\n 7 Gentoo  Biscoe           45.5          13.7               214        4650\n 8 Gentoo  Biscoe           45.8          14.6               210        4200\n 9 Gentoo  Biscoe           42            13.5               210        4150\n10 Gentoo  Biscoe           46.2          14.5               209        4800\n# ℹ 48 more rows\n# ℹ 2 more variables: sex <fct>, year <int>\n\n$Adelie.male\n# A tibble: 73 × 8\n   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n   <fct>   <fct>              <dbl>         <dbl>             <int>       <int>\n 1 Adelie  Torgersen           39.1          18.7               181        3750\n 2 Adelie  Torgersen           39.3          20.6               190        3650\n 3 Adelie  Torgersen           39.2          19.6               195        4675\n 4 Adelie  Torgersen           38.6          21.2               191        3800\n 5 Adelie  Torgersen           34.6          21.1               198        4400\n 6 Adelie  Torgersen           42.5          20.7               197        4500\n 7 Adelie  Torgersen           46            21.5               194        4200\n 8 Adelie  Biscoe              37.7          18.7               180        3600\n 9 Adelie  Biscoe              38.2          18.1               185        3950\n10 Adelie  Biscoe              38.8          17.2               180        3800\n# ℹ 63 more rows\n# ℹ 2 more variables: sex <fct>, year <int>\n\n$Chinstrap.male\n# A tibble: 34 × 8\n   species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n   <fct>     <fct>           <dbl>         <dbl>             <int>       <int>\n 1 Chinstrap Dream            50            19.5               196        3900\n 2 Chinstrap Dream            51.3          19.2               193        3650\n 3 Chinstrap Dream            52.7          19.8               197        3725\n 4 Chinstrap Dream            51.3          18.2               197        3750\n 5 Chinstrap Dream            51.3          19.9               198        3700\n 6 Chinstrap Dream            51.7          20.3               194        3775\n 7 Chinstrap Dream            52            18.1               201        4050\n 8 Chinstrap Dream            50.5          19.6               201        4050\n 9 Chinstrap Dream            50.3          20                 197        3300\n10 Chinstrap Dream            49.2          18.2               195        4400\n# ℹ 24 more rows\n# ℹ 2 more variables: sex <fct>, year <int>\n\n$Gentoo.male\n# A tibble: 61 × 8\n   species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n   <fct>   <fct>           <dbl>         <dbl>             <int>       <int>\n 1 Gentoo  Biscoe           50            16.3               230        5700\n 2 Gentoo  Biscoe           50            15.2               218        5700\n 3 Gentoo  Biscoe           47.6          14.5               215        5400\n 4 Gentoo  Biscoe           46.7          15.3               219        5200\n 5 Gentoo  Biscoe           46.8          15.4               215        5150\n 6 Gentoo  Biscoe           49            16.1               216        5550\n 7 Gentoo  Biscoe           48.4          14.6               213        5850\n 8 Gentoo  Biscoe           49.3          15.7               217        5850\n 9 Gentoo  Biscoe           49.2          15.2               221        6300\n10 Gentoo  Biscoe           48.7          15.1               222        5350\n# ℹ 51 more rows\n# ℹ 2 more variables: sex <fct>, year <int>\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Use a `for` loop to calculate the mean bill length (`bill_length_mm`) for each `species/sex` combination`\"}\nmean_bill_length_for_loop <- vector(\"list\", length(by_species_sex))\n\nfor(i in seq_along(by_species_sex)) {\n  mean_bill_length_for_loop[i] <- round(mean(\n    by_species_sex[[i]]$bill_length_mm,\n    na.rm = TRUE\n  ), 2)\n}\n\nmean_bill_length_for_loop\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[[1]]\n[1] 37.26\n\n[[2]]\n[1] 46.57\n\n[[3]]\n[1] 45.56\n\n[[4]]\n[1] 40.39\n\n[[5]]\n[1] 51.09\n\n[[6]]\n[1] 49.47\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Replicate this calculation with `lapply`\"}\nmean_bill_length_lapply <- lapply(by_species_sex, \\(df) round(mean(df$bill_length_mm, na.rm = TRUE), 2))\nmean_bill_length_lapply\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$Adelie.female\n[1] 37.26\n\n$Chinstrap.female\n[1] 46.57\n\n$Gentoo.female\n[1] 45.56\n\n$Adelie.male\n[1] 40.39\n\n$Chinstrap.male\n[1] 51.09\n\n$Gentoo.male\n[1] 49.47\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Replicate this calculation with `sapply`\"}\nmean_bill_length_sapply <- sapply(by_species_sex, \\(df) round(mean(df$bill_length_mm, na.rm = TRUE), 2))\nmean_bill_length_sapply\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Adelie.female Chinstrap.female    Gentoo.female      Adelie.male \n           37.26            46.57            45.56            40.39 \n  Chinstrap.male      Gentoo.male \n           51.09            49.47 \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Replicate this calculation with `vapply`\"}\nmean_bill_length_vapply <- vapply(by_species_sex, \\(df) round(mean(df$bill_length_mm, na.rm = TRUE), 2), FUN.VALUE = double(1))\nmean_bill_length_vapply\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   Adelie.female Chinstrap.female    Gentoo.female      Adelie.male \n           37.26            46.57            45.56            40.39 \n  Chinstrap.male      Gentoo.male \n           51.09            49.47 \n```\n\n\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Produce separate plots showing the change in `bill_length_mm` from 2007 to 2009 for each `species/sex` combination (with a single loop). Set the `bill_length_mm` axis so the limits equal the overall minimum and maximum values for `bill_length_mm`\"}\nplots <- lapply(by_species_sex, \\(df) {\n  bill_length_range <- range(df$bill_length_mm)\n  min_year <- min(df$year)\n  max_year <- max(df$year)\n  \n  ggplot(df, aes(factor(year), bill_length_mm)) +\n  geom_boxplot() +\n  scale_y_continuous(limits = bill_length_range) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(\n      hjust = 0.5, \n      face = \"bold\", \n      size = 18\n    )\n  ) +\n  labs(\n    x = \"Year\",\n    y = \"Bill Length (mm)\",\n    title = str_to_sentence(paste(\n      \"Bill Length for a\", \n      unique(penguins$sex),\n      unique(penguins$species),\n      \"from\",\n      min_year,\n      \"to\",\n      max_year\n    ))\n  )\n})\n\nplots$Chinstrap.female\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-17-1.png){fig-align='center' width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Use a `for` loop to save the plots to a folder on your computer\"}\ndir_create(here(\"plots\"))\nfile_names <- paste0(\n  tolower(gsub(\"\\\\.\", \"_\", names(by_species_sex))), \"_bill_lengths.png\"\n)\nfile_names\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"adelie_female_bill_lengths.png\"    \"chinstrap_female_bill_lengths.png\"\n[3] \"gentoo_female_bill_lengths.png\"    \"adelie_male_bill_lengths.png\"     \n[5] \"chinstrap_male_bill_lengths.png\"   \"gentoo_male_bill_lengths.png\"     \n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Use a `for` loop to save the plots to a folder on your computer\"}\nfile_paths <- here(\"plots\", file_names)\nfile_paths\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"C:/Users/4p0nc/OneDrive - hawaii.edu/Desktop/r/functional_programming_in_r/plots/adelie_female_bill_lengths.png\"   \n[2] \"C:/Users/4p0nc/OneDrive - hawaii.edu/Desktop/r/functional_programming_in_r/plots/chinstrap_female_bill_lengths.png\"\n[3] \"C:/Users/4p0nc/OneDrive - hawaii.edu/Desktop/r/functional_programming_in_r/plots/gentoo_female_bill_lengths.png\"   \n[4] \"C:/Users/4p0nc/OneDrive - hawaii.edu/Desktop/r/functional_programming_in_r/plots/adelie_male_bill_lengths.png\"     \n[5] \"C:/Users/4p0nc/OneDrive - hawaii.edu/Desktop/r/functional_programming_in_r/plots/chinstrap_male_bill_lengths.png\"  \n[6] \"C:/Users/4p0nc/OneDrive - hawaii.edu/Desktop/r/functional_programming_in_r/plots/gentoo_male_bill_lengths.png\"     \n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Use a `for` loop to save the plots to a folder on your computer\"}\nfor(plot in seq_along(file_paths)) {\n  ggsave(\n    file_paths[plot],\n    plots[[plot]],\n    width = 20,\n    height = 12,\n    units = \"in\",\n    dpi = 300\n  )\n}\n```\n:::\n\n\n\n:::",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}